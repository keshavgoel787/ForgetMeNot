<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hackathon App Test</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* Reset and base styles */
        :root {
          font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
          line-height: 1.5;
          font-weight: 400;
          color: #213547;
          background-color: #ffffff;
        }
        
        body {
          margin: 0;
          min-width: 320px;
          min-height: 100vh;
        }
        
        /* Layout shell */
        .app {
          display: flex;
          min-height: 100vh;
          background: #dbe7f5; /* light blue page background */
        }

        /* navbar */
        .sidebar {
          min-width: 120px;
          max-width: 180px;
          width: auto;
          padding: 16px 12px;
          background: #a9bff0; /* bluish sidebar */
          border-right: 1px solid rgba(0,0,0,0.18);
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 14px;
        }

        .brand {
          width: 100%;
          height: 56px;
          border-radius: 100px;
          background: #f0f0f0;
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: 700;
          letter-spacing: 1px;
          overflow: hidden;
        }
        
        .brand img {
          width: 48px;
          height: 48px;
          object-fit: contain;
        }

        .nav {
          display: flex;
          flex-direction: column;
          width: 100%;
          gap: 8px;
          flex: 1;
        }
        
        .nav-main {
          display: flex;
          flex-direction: column;
          gap: 8px;
          justify-content: center;
          flex: 1;
        }
        
        .nav-bottom {
          margin-top: auto;
        }

        .nav-item {
          all: unset;
          display: block;
          width: 100%;
          text-align: center;
          padding: 8px 0;
          border-radius: 10px;
          background: rgba(255,255,255,0.4);
          cursor: pointer;
          transition: background 0.15s ease;
        }

        .nav-item:hover {
          background: rgba(255,255,255,0.65);
          transform: scale(1.1);
        }
        
        
        .remember-container {
          position: relative;
          width: 100%;
          height: 100%;
          background: #1a1a1a;
          overflow: hidden;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        
        .central-circle {
          position: relative;
          width: 200px;
          height: 200px;
          border-radius: 40px;
          background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
          border: 2px solid rgba(255,255,255,0.3);
          box-shadow: 
            0 0 20px rgba(0, 255, 255, 0.4),
            inset 0 0 20px rgba(255, 255, 255, 0.1);
          animation: bubble-glow 2s ease-in-out infinite alternate;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        
        @keyframes borderPulse {
          0%, 100% { 
            box-shadow: 
              0 0 50px rgba(255, 0, 128, 0.3),
              0 0 100px rgba(255, 128, 0, 0.2),
              inset 0 0 50px rgba(255, 255, 255, 0.1);
          }
          50% { 
            box-shadow: 
              0 0 70px rgba(255, 0, 128, 0.5),
              0 0 140px rgba(255, 128, 0, 0.3),
              inset 0 0 70px rgba(255, 255, 255, 0.2);
          }
        }
        
        @keyframes rotate {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        
        /* Orbital System */
        .orbit-container {
          position: absolute;
          width: 450px;
          height: 450px;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          /* No animation here, this is a fixed container */
          pointer-events: none;
        }
        
        .memory-bubble {
          pointer-events: auto !important;
          transition: transform 0.3s ease-out, opacity 0.3s ease-out;
          position: absolute;
          display: flex;
          flex-direction: column;
          align-items: center;
          pointer-events: auto !important;
          cursor: pointer;
        }

        
        /* Shrinking animation when bubble is clicked */
        .memory-bubble.shrinking {
          transform: scale(0.1) !important;
          opacity: 0;
        }

        @keyframes bubble-expand {
          0% { transform: scale(0.1); }
          100% { transform: scale(1); }
        }

        @keyframes orbitSpin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        
        @keyframes counterRotate {
          from { transform: rotate(0deg); }
          to { transform: rotate(-360deg); }
        }
        
        .memory-circle {
          position: relative;
          width: 60px;
          height: 60px;
          border-radius: 50%;
          background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0.05) 100%);
          border: 2px solid rgba(255,255,255,0.3);
          box-shadow: 
            0 0 20px rgba(0, 255, 255, 0.4),
            inset 0 0 20px rgba(255, 255, 255, 0.1);
          display: flex;
          align-items: center;
          justify-content: center;
          animation: bubble-glow 2s ease-in-out infinite alternate;
        }
        
        .memory-circle::before {
          display: none;
        }
        
        @keyframes particle-beam {
          0%, 100% { opacity: 0.2; }
          50% { opacity: 0.6; }
        }
        
        @keyframes bubble-glow {
          0% { 
            box-shadow: 
              0 0 20px rgba(0, 255, 255, 0.4),
              inset 0 0 20px rgba(255, 255, 255, 0.1);
          }
          100% { 
            box-shadow: 
              0 0 30px rgba(0, 255, 255, 0.6),
              inset 0 0 30px rgba(255, 255, 255, 0.2);
          }
        }
        
        .memory-bubble img {
          width: 24px;
          height: 24px;
        }
        
        .memory-label {
          color: white;
          font-size: 12px;
          margin-top: 8px;
          text-align: center;
          font-weight: 500;
        }
                
        /* Text Input System */
        .input-container {
          position: absolute;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
          width: 400px;
        }
        
        .memory-input {
          width: 100%;
          padding: 16px 24px;
          border: 2px solid rgba(255, 255, 255, 0.2);
          border-radius: 25px;
          background: rgba(0, 0, 0, 0.7);
          color: white;
          font-size: 16px;
          outline: none;
          transition: all 0.3s ease;
        }
        
        .memory-input:focus {
          border-color: rgba(0, 255, 255, 0.5);
          box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }
        
        .memory-input::placeholder {
          color: rgba(255, 255, 255, 0.5);
        }
        
        /* Suggestions Section */
        .suggestions-section {
          position: absolute;
          top: 40px;
          left: 50%;
          transform: translateX(-50%);
          display: flex;
          align-items: center;
          gap: 20px;
        }
        
        .suggestions-title {
          color: rgba(255, 255, 255, 0.7);
          font-size: 14px;
          margin-right: 10px;
        }
        
        .suggestion-item {
          display: flex;
          flex-direction: column;
          align-items: center;
          cursor: pointer;
          transition: transform 0.3s ease;
        }
        
        .suggestion-item:hover {
          transform: scale(1.1);
        }

        
        .memory-bubble:hover {
          transform: scale(1.1);
        }
        
        .suggestion-circle {
          width: 40px;
          height: 40px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-bottom: 4px;
        }
        
        .suggestion-circle img {
          width: 20px;
          height: 20px;
        }
        
        .suggestion-label {
          color: rgba(255, 255, 255, 0.8);
          font-size: 10px;
        }
        
        /* Right content area */
        .main {
          flex: 1;
          padding: 0;
          display: flex;
          flex-direction: column;
        }
        
        /* Header bar */
        .header-bar {
          background: #c4d5f5; /* between sidebar and background color */
          height: 80px;
          display: flex;
          align-items: center;
          padding: 0 32px;
          font-size: 24px;
          font-weight: 600;
          color: #333;
        }
        
        /* Content area below header */
        .content {
          flex: 1;
          padding: 32px;
        }

        /* Cards container and cards */
        .cards {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 32px;
          align-items: start;
          height: 100%;
          padding: 0;
          width: 100%;
          box-sizing: border-box;
        }

        .card {
          background: #ffffff;
          border-radius: 22px;
          padding: 24px;
          border: 1px solid rgba(0,0,0,0.12);
          box-shadow: 0 8px 20px rgba(0,0,0,0.08);
          min-height: 200px;
          display: flex;
          flex-direction: column;
        }
        .card h2 {
          margin: 0 0 8px 0;
          font-size: 1.1rem;
        }
        
        /* Hide content when not active */
        .screen {
          display: none;
        }
        
        .screen.active {
          display: flex;
          flex-direction: column;
          flex: 1;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        function App() {
          const [currentScreen, setCurrentScreen] = React.useState('dashboard');
          const [memories, setMemories] = React.useState([]);
          const [inputValue, setInputValue] = React.useState('');
          const [isAnimating, setIsAnimating] = React.useState(false);
          
          // Helper function to redistribute angles evenly
          const redistributeAngles = (memoryList) => {
            const n = memoryList.length;
            if (n === 0) return [];
            return memoryList.map((memory, index) => ({
              ...memory,
              angle: (360 / n) * index
            }));
          };
          
          // Function to remove a memory when clicked
          const removeMemory = (memoryId) => {
            // Find the bubble element and add shrinking class
            const bubbleElement = document.querySelector(`[data-memory-id="${memoryId}"] .memory-bubble`);
            if (bubbleElement) {
              bubbleElement.classList.add('shrinking');
            }
            
            // Remove from state after animation completes (0.3s)
            setTimeout(() => {
              setMemories(prevMemories => {
                const filtered = prevMemories.filter(memory => memory.id !== memoryId);
                return redistributeAngles(filtered);
              });
            }, 300);
          };
          
          const addMemory = () => {
            if (inputValue.trim() && !isAnimating) {
              setIsAnimating(true);
              const newId = Date.now();
              const newMemory = { id: newId, text: inputValue.trim(), angle: 0 };

              // Temporarily add "expanding" class to all existing bubbles
              document.querySelectorAll('.memory-bubble').forEach(bubble => {
                bubble.classList.add('expanding');
              });

              // Update memory list with evenly distributed angles
              setMemories(prevMemories => {
                const allMemories = [...prevMemories, newMemory];
                return redistributeAngles(allMemories);
              });

              setInputValue('');

              // Reset animation flag after animation completes
              setTimeout(() => setIsAnimating(false), 1000);
            }
          };          
          
          const handleKeyPress = (e) => {
            if (e.key === 'Enter') {
              addMemory();
            }
          };
          
          const addSuggestion = (text) => {
            if (!isAnimating) {
              setInputValue(text);
              setTimeout(addMemory, 100);
            }
          };
          
          
          const HomeScreen = () => (
            React.createElement('div', { className: 'screen active' },
              React.createElement('div', { className: 'header-bar' }, 'Dashboard'),
              React.createElement('div', { className: 'content' },
                React.createElement('div', { className: 'cards' },
                  React.createElement('div', { className: 'card' },
                    React.createElement('div', { style: { display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' } },
                      React.createElement('h2', null, 'Card One')
                    ),
                    React.createElement('p', null, 'This is the first card with some placeholder content. You can add your Google Gemini API integration here.')
                  ),
                  React.createElement('div', { className: 'card' },
                    React.createElement('div', { style: { display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' } },
                      React.createElement('h2', null, 'Card Two')
                    ),
                    React.createElement('p', null, 'This is the second card where you can add more functionality for your hackathon project.')
                  )
                )
              )
            )
          );
          
          const RememberScreen = () => {
            const suggestions = ['Brian', 'Hiker', 'Fireworks', 'Forest', 'Love', 'Park', 'Sunset'];
            return React.createElement('div', { className: 'screen active' },
              React.createElement('div', { className: 'remember-container' },
                // Central Rainbow Circle with star
                React.createElement('div', { className: 'central-circle' },
                  React.createElement('img', {
                    src: './src/assets/fav_icon_clicked.png',
                    alt: 'Central Star',
                    style: {
                      width: '80px',
                      height: '80px',
                      filter: `drop-shadow(${Math.random() * 10 - 5}px ${Math.random() * 10 - 5}px ${Math.random() * 15 + 5}px rgba(255, 255, 255, 0.8))`
                    }
                  })
                ),
                // Orbital System - force re-render with key based on memories
                React.createElement('div', { 
                  className: 'orbit-container',
                  key: `orbit-${memories.length}-${memories.map(m => m.id).join('-')}`
                },
                  memories.map((memory, index) => {
                    const n = memories.length;
                    // Use memory.angle for even distribution
                    const angle = memory.angle || 0;
                    const orbitRadius = 225; // px, so bubbles orbit at 225px from center (75% of 300px)
                    
                    // DEBUG: Log the angle for each memory
                    console.log(`Memory "${memory.text}": angle=${angle}, index=${index}, total=${n}`);
                    
                    // Convert angle to radians and calculate x, y position
                    const radian = (angle * Math.PI) / 180;
                    const x = Math.cos(radian) * orbitRadius;
                    const y = Math.sin(radian) * orbitRadius;
                    
                    return React.createElement('div', {
                      key: `${memory.id}-${angle}`,
                      className: 'memory-bubble-orbit',
                      'data-memory-id': memory.id,
                      style: {
                        animation: 'none'
                      }
                    },
                      React.createElement('div', {
                        className: 'memory-bubble',
                        style: {
                          position: 'absolute',
                          left: '50%',
                          top: '50%',
                          transform: `translate(-50%, -50%) translate(${x}px, ${y}px)`,
                          cursor: 'pointer'
                        },
                        onClick: (e) => {
                          e.stopPropagation();
                          removeMemory(memory.id);
                        }
                      },
                        React.createElement('div', { 
                          className: 'memory-circle'
                        },
                          React.createElement('img', {
                            src: './src/assets/fav_icon_clicked.png',
                            alt: memory.text
                          })
                        ),
                        React.createElement('div', { 
                          className: 'memory-label',
                          style: {
                            position: 'absolute',
                            top: '100%',
                            left: '50%',
                            transform: 'translateX(-50%)',
                            marginTop: '8px',
                            color: 'white',
                            fontSize: '12px',
                            fontWeight: '500',
                            textAlign: 'center',
                            whiteSpace: 'nowrap'
                          }
                        }, memory.text)
                      )
                    );
                  })
                ),
                // Text Input
                React.createElement('div', { className: 'input-container' },
                  React.createElement('input', {
                    type: 'text',
                    className: 'memory-input',
                    placeholder: 'Describe a memory...',
                    value: inputValue,
                    onChange: (e) => setInputValue(e.target.value),
                    onKeyPress: handleKeyPress
                  })
                ),
                // Suggestions
                React.createElement('div', { className: 'suggestions-section' },
                  React.createElement('div', { className: 'suggestions-title' }, 'Suggestions'),
                  suggestions.map((suggestion, index) => {
                    const colors = [
                      'linear-gradient(45deg, #ff6b6b, #feca57)',
                      'linear-gradient(45deg, #48cae4, #023e8a)',
                      'linear-gradient(45deg, #f72585, #b5179e)',
                      'linear-gradient(45deg, #2d6a4f, #52b788)',
                      'linear-gradient(45deg, #e76f51, #f4a261)',
                      'linear-gradient(45deg, #8ecae6, #219ebc)',
                      'linear-gradient(45deg, #fb8500, #ffb703)'
                    ];
                    return React.createElement('div', {
                      key: suggestion,
                      className: 'suggestion-item',
                      onClick: () => addSuggestion(suggestion)
                    },
                      React.createElement('div', {
                        className: 'suggestion-circle',
                        style: { background: colors[index % colors.length] }
                      },
                        React.createElement('img', {
                          src: './src/assets/fav_icon_clicked.png',
                          alt: suggestion
                        })
                      ),
                      React.createElement('div', { className: 'suggestion-label' }, suggestion)
                    );
                  })
                )
              )
            );
          };
          
          const MyMemoriesScreen = () => (
            React.createElement('div', { className: 'screen active' },
              React.createElement('div', { className: 'header-bar' }, 'My Memories'),
              React.createElement('div', { className: 'content' },
                React.createElement('div', { className: 'cards' },
                  React.createElement('div', { className: 'card' },
                    React.createElement('div', { style: { display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' } },
                      React.createElement('h2', null, 'Memory Alpha')
                    ),
                    React.createElement('p', null, 'Your first memory with advanced features and functionality.')
                  ),
                  React.createElement('div', { className: 'card' },
                    React.createElement('div', { style: { display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' } },
                      React.createElement('h2', null, 'Memory Beta')
                    ),
                    React.createElement('p', null, 'Second memory focusing on user experience and design.')
                  )
                )
              )
            )
          );

          const renderCurrentScreen = () => {
            switch(currentScreen) {
              case 'dashboard': return HomeScreen();
              case 'remember': return RememberScreen();
              case 'My_Memories': return MyMemoriesScreen();
              default: return HomeScreen();
            }
          };
          
          return React.createElement('div', { className: 'app' }, 
            React.createElement('aside', { className: 'sidebar' },
              React.createElement('div', { className: 'brand' },
                React.createElement('img', { 
                  src: './src/assets/FMN_Flower.png',
                  alt: 'ForgetMeNot Logo',
                  title: 'ForgetMeNot Logo'
                })
              ),
              React.createElement('nav', { className: 'nav' },
                React.createElement('div', { className: 'nav-main' },
                  React.createElement('button', { 
                    className: 'nav-item',
                    onClick: () => setCurrentScreen('dashboard')
                  }, 'Dashboard'),
                  React.createElement('button', { 
                    className: 'nav-item',
                    onClick: () => setCurrentScreen('remember')
                  }, 'Remember'),
                  React.createElement('button', { 
                    className: 'nav-item',
                    onClick: () => setCurrentScreen('My_Memories')
                  }, 'My Memories')
                )
              )
            ),
            React.createElement('main', { className: 'main' },
              renderCurrentScreen()
            )
          );
        }

        try {
          ReactDOM.render(React.createElement(App), document.getElementById('root'));
        } catch (error) {
          console.error('Error rendering app:', error);
          document.getElementById('root').innerHTML = `<h1>Error: ${error.message}</h1><pre>${error.stack}</pre>`;
        }
    </script>
</body>
</html>
