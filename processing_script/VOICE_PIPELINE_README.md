# Voice Pipeline - Extract & Upload

Combined pipeline that extracts audio from videos and uploads to ElevenLabs.

## What It Does

**Step 1: Audio Extraction**
- Finds videos where only one person appears
- Extracts audio from those videos
- Merges all audio clips per person
- Saves as `{name}_voice.mp3` in person folder

**Step 2: ElevenLabs Upload**
- Uploads voice samples to ElevenLabs
- Creates AI voice clones
- Names them as `{name}_voice_forgetmenot`

## Prerequisites

1. **ffmpeg** (for audio extraction)
   ```bash
   sudo dnf install ffmpeg
   ```

2. **ElevenLabs API key** (for voice cloning)
   - Sign up at [elevenlabs.io](https://elevenlabs.io)
   - Get API key from Settings → Profile
   - Add to `.env` file:
     ```
     ELEVENLABS_API_KEY=your_api_key_here
     ```

3. **Context files** (generated by Step 3)
   - Run `3_generate_context.py` first
   - Ensures people are identified in videos

## Usage

```bash
python 4_extract_and_upload_voices.py
```

## What Gets Created

For each person with solo videos:

```
people/
├── Tyler/
│   ├── Tyler_voice.mp3           ← Merged voice sample
│   ├── audio_clips/               ← Individual clips
│   │   ├── audio_000_Football_trip_2.mp3
│   │   └── ...
│   └── face_*.jpg
```

And in ElevenLabs:
- `Tyler_voice_forgetmenot` (Voice ID: abc123...)
- `Hannah_voice_forgetmenot` (Voice ID: def456...)
- etc.

## Skip Already Processed

The script automatically skips:
- ✅ People who already have `{name}_voice.mp3` files
- ✅ Voices already uploaded to ElevenLabs

Safe to re-run!

## Expected Output

```
✅ Step 1 Complete: Extracted audio for 5 people
✅ Step 2 Complete: Uploaded 5, Skipped 0
✅ PIPELINE COMPLETE!
```

## Individual Scripts

You can also run each step separately:

**Audio extraction only:**
```bash
python extract_person_audio.py
```

**ElevenLabs upload only:**
```bash
python upload_voices_to_elevenlabs.py
```

## Next Steps

After running this pipeline, you can:
1. Use voice clones in ElevenLabs dashboard
2. Generate speech in people's voices via API
3. Create personalized audio narration
